<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Déconnexion</title>
    <style>
        body {font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; display:flex; align-items:center; justify-content:center; min-height:100vh; background: #f8fafc; color:#111827}
        .card {background:white; padding:24px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.08); max-width:420px; text-align:center}
        .muted {color:#6b7280}
    </style>
</head>
<body>
    <div class="card">
        <h2>Déconnecté</h2>
        <p class="muted">Vous avez été déconnecté. Rechargement et redirection vers la page de connexion...</p>
    </div>

    <script>
        (function () {
            // Essayer de nettoyer les stockages locaux
            try { localStorage.clear(); sessionStorage.clear(); } catch (e) { /* ignore */ }

            // Petite pause pour s'assurer que la session côté serveur est terminée
            setTimeout(function () {
                // Remplace l'entrée d'historique courante par la page de login.
                // Utiliser replace empêche d'ajouter une nouvelle entrée d'historique,
                // ce qui réduit les chances que le bouton "retour" ramène aux pages privées.
                window.location.replace("{% url 'login' %}");
            }, 180);
        })();
    </script>
</body>
</html>
